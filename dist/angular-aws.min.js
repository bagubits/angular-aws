var angularAWS=angular.module("angular-aws",[]);angularAWS.provider("$AWS",[function(){this.MFARequired=!1,this.poolData=null,this.identityPoolId=null,this.cognitoLoginId=null,this.userAttributes=null,this.region=null,this.setRegion=function(a){this.region=a,AWSCognito.config.region="us-east-1",AWS.config.region="us-east-1"},this.$get=[function(){return{MFARequired:this.MFARequired,poolData:this.poolData,identityPoolId:this.identityPoolId,cognitoLoginId:this.cognitoLoginId,userAttributes:this.userAttributes,setRegion:this.setRegion}}]}]),angularAWS.service("Cognito",["$AWS",function(a){this.cognitoUser=null,this.userPool=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(a.poolData),this.cognitoUserdata={name:"",pass:"",attributelist:Array()},this.cognitoAttributeList=Array(),this.initialize=function(a,b,c){this.cognitoUserdata.name=a,this.cognitoUserdata.pass=b,this.cognitoUserdata.attributelist=c},this.register=function(a,b,c,d){angular.forEach(c,function(a,b){var c=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(a);this.cognitoAttributeList.push(c)}),this.cognitoUserdata.name=a,this.cognitoUserdata.pass=b,this.cognitoUserdata.attributelist=this.cognitoAttributeList,this.userPool.signUp(a,b,cognitoAttributeList,null,function(a,b){return a?d(!1,a):(this.cognitoUser=b.user,d(!0,this.cognitoUser))})},this.validate=function(a,b,c){this.cognitoUser||(this.cognitoUser=new AWSCognito.CognitoIdentityServiceProvider.CognitoUser({Username:b,Pool:this.userPool})),this.cognitoUser.confirmRegistration(a,!0,function(a,b){return a?c(!1,a):c(!0,b)})},this.authenticate=function(b,c,d){this.cognitoUser||(this.cognitoUser=new AWSCognito.CognitoIdentityServiceProvider.CognitoUser({Username:b,Pool:this.userPool}));var e=new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails({Username:b,Password:c});this.cognitoUserdata.name=b,this.cognitoUserdata.pass=c,this.cognitoUser.authenticateUser(e,{onSuccess:function(b){var c={};c[a.cognitoLoginId]=b.getIdToken().getJwtToken(),AWS.config.region=AWSCognito.config.region,AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:a.identityPoolId,region:AWSCognito.config.region,Logins:c}),d(!0,b)},mfaRequired:function(a){d(!1,"Confirmation required",a)},onFailure:function(a){d(!1,a)}})},this.signOut=function(){return this.cognitoUser?this.cognitoUser.globalSignOut():null},this.getSession=function(b,c){var d=this.userPool.getCurrentUser();null!=d&&this.cognitoUser.getSession(function(b,d){if(d){var e={};e[a.cognitoLoginId]=d.getIdToken().getJwtToken(),AWS.config.region=AWSCognito.config.region,AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:a.identityPoolId,region:AWSCognito.config.region,Logins:e}),AWS.config.credentials.get(function(a){a?console.error(a):(AWS.config.update({accessKeyId:AWS.config.credentials.accessKeyId,secretAccessKey:AWS.config.credentials.secretAccessKey}),c&&c(AWS.config.credentials))})}})},this.getUserAttributes=function(a){this.cognitoUser.getUserAttributes(function(b,c){b?a(!1,b):a(!0,c)})}}]),angularAWS.service("DynamoDB",function(){function a(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}this.db=null,this.read=function(a,b){this.db||(this.db=new AWS.DynamoDB),this.db.getItem(a,function(a,c){return a?b(!1,a):b(!0,c)})},this.getguid=function(){return a()},this.write=function(a,b,c){this.db||(this.db=new AWS.DynamoDB);var d=DynamoDbDataTypes.AttributeValue.wrap(b),e={TableName:a,Item:d};this.db.putItem(e,function(a,b){return a?c(!1,a):c(!0,b)})},this.scan=function(a,b){this.db||(this.db=new AWS.DynamoDB);var c=this.db.DocumentClient();c.scan(a,b)}}),angularAWS.service("S3",function(){this.upload=function(a,b,c,d){var a=new AWS.S3({params:{Bucket:a}}),e={Key:b,ContentType:c.type,Body:c};a.upload(e,function(a,b){a?d(!1):d(!0,b)})}});
//# sourceMappingURL=angular-aws.min.js.map